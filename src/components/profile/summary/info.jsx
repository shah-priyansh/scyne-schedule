import {useDispatch, useSelector} from "react-redux";
import React, {useEffect} from "react";
import {getAccountInfo} from "@/redux/profile/action-reducer.js";
import {skillUserId} from "@/lib/constants.js";
import {getSkills} from "@/redux/skills/action-reducer.js";
import {ProfileImageLoading} from "@/components/ui/loading.jsx";

export default function Info() {

    const dispatch = useDispatch();

    const {profileInfo, profileImage, loading: profileLoading} = useSelector((state) => state.profile);
    const {totalActiveSkills, skillsLoading} = useSelector((state) => state.skills);

    useEffect(() => {
        dispatch(getAccountInfo({
            userId: skillUserId
        }))
        dispatch(getSkills())
    }, [dispatch]);
    const isLoading = profileLoading || skillsLoading;

    return (
        <>
            {isLoading ? (
                <ProfileImageLoading />
            ) : (
                <div className={'relative profile-div overflow-hidden rounded-3xl'}>
                    <img src={profileImage || "assets/img/profile-img.png"} alt="profile-img" className={'w-full h-full object-cover'}/>
                    <div className={'absolute bottom-1 p-4 z-10'}>
                        <div className={'text-[20px] text-white mb-3'}>
                            <span className={'font-semibold'}>{profileInfo?.Name}</span> ({profileInfo?.UserRole__c})
                        </div>
                        <div className={'flex flex-wrap gap-2'}>
                            <div
                                className={'text-[12px] inline-flex gap-2 rounded-3xl profile-label-bg px-3 py-1 items-center font-medium text-white'}>
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path fillRule="evenodd" clipRule="evenodd"
                                          d="M10.7716 5.4884C10.7716 7.05486 9.52277 8.31091 7.96537 8.31091C6.40796 8.31091 5.15918 7.05486 5.15918 5.4884C5.15918 3.92135 6.40796 2.6665 7.96537 2.6665C9.52277 2.6665 10.7716 3.92135 10.7716 5.4884ZM7.96537 13.3332C5.67791 13.3332 3.72474 12.9705 3.72474 11.5199C3.72474 10.0688 5.66538 9.69292 7.96537 9.69292C10.2528 9.69292 12.206 10.0556 12.206 11.5067C12.206 12.9573 10.2654 13.3332 7.96537 13.3332ZM11.9707 5.53932C11.9707 6.33786 11.7326 7.08176 11.3147 7.70018C11.2717 7.76382 11.3099 7.84968 11.3857 7.86288C11.4902 7.8809 11.5983 7.8911 11.7081 7.89411C12.8035 7.92293 13.7866 7.21385 14.0582 6.14633C14.4606 4.56066 13.2792 3.1371 11.7749 3.1371C11.6114 3.1371 11.455 3.15451 11.3028 3.18573C11.2819 3.19054 11.2598 3.20014 11.2479 3.21876C11.2335 3.24157 11.2443 3.27219 11.2586 3.29201C11.7105 3.92903 11.9707 4.70596 11.9707 5.53932ZM13.7848 9.00822C14.5209 9.15291 15.005 9.44831 15.2055 9.8776C15.3751 10.23 15.3751 10.6389 15.2055 10.9908C14.8987 11.6566 13.9096 11.8703 13.5252 11.9256C13.4458 11.9376 13.3819 11.8685 13.3903 11.7887C13.5866 9.94365 12.0245 9.06886 11.6203 8.86772C11.603 8.85872 11.5995 8.84491 11.6012 8.8365C11.6024 8.8305 11.6096 8.82089 11.6227 8.81909C12.4972 8.80288 13.4374 8.92296 13.7848 9.00822ZM4.29075 7.89405C4.40059 7.89104 4.50804 7.88144 4.6131 7.86282C4.68891 7.84962 4.72711 7.76376 4.68413 7.70012C4.26628 7.0817 4.0281 6.3378 4.0281 5.53926C4.0281 4.7059 4.28837 3.92897 4.74025 3.29195C4.75457 3.27213 4.76472 3.24151 4.75099 3.2187C4.73905 3.20068 4.71637 3.19048 4.69607 3.18567C4.54326 3.15445 4.38686 3.13704 4.2233 3.13704C2.71902 3.13704 1.53769 4.5606 1.94062 6.14627C2.21223 7.21379 3.19538 7.92287 4.29075 7.89405ZM4.39731 8.83614C4.3991 8.84515 4.39552 8.85836 4.3788 8.86796C3.97408 9.0691 2.4119 9.94389 2.60829 11.7883C2.61665 11.8688 2.55338 11.9372 2.47398 11.9258C2.08956 11.8706 1.10044 11.6568 0.79361 10.991C0.623484 10.6386 0.623484 10.2303 0.79361 9.87784C0.994181 9.44855 1.4777 9.15315 2.21372 9.00786C2.56173 8.9232 3.50131 8.80312 4.37642 8.81933C4.38955 8.82113 4.39611 8.83074 4.39731 8.83614Z"
                                          fill="white"/>
                                </svg>
                                {profileInfo?.UserTeam__c}
                            </div>
                            <div
                                className={'text-[12px] inline-flex gap-2 rounded-3xl profile-label-bg px-3 py-1 items-center font-medium text-white'}>
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M13.5 2.5H2.5C2.23478 2.5 1.98043 2.60536 1.79289 2.79289C1.60536 2.98043 1.5 3.23478 1.5 3.5V12.5C1.5 12.7652 1.60536 13.0196 1.79289 13.2071C1.98043 13.3946 2.23478 13.5 2.5 13.5H13.5C13.7652 13.5 14.0196 13.3946 14.2071 13.2071C14.3946 13.0196 14.5 12.7652 14.5 12.5V3.5C14.5 3.23478 14.3946 2.98043 14.2071 2.79289C14.0196 2.60536 13.7652 2.5 13.5 2.5ZM5.8 9.1C5.90609 9.17957 5.97622 9.29801 5.99497 9.42929C6.01373 9.56056 5.97957 9.69391 5.9 9.8C5.82044 9.90609 5.70199 9.97622 5.57071 9.99498C5.43944 10.0137 5.30609 9.97956 5.2 9.9L3.2 8.4C3.1379 8.35343 3.0875 8.29303 3.05279 8.22361C3.01807 8.15418 3 8.07762 3 8C3 7.92238 3.01807 7.84582 3.05279 7.77639C3.0875 7.70697 3.1379 7.64657 3.2 7.6L5.2 6.1C5.30609 6.02043 5.43944 5.98627 5.57071 6.00503C5.70199 6.02378 5.82044 6.09391 5.9 6.2C5.97957 6.30609 6.01373 6.43944 5.99497 6.57071C5.97622 6.70199 5.90609 6.82044 5.8 6.9L4.33313 8L5.8 9.1ZM9.48063 4.6375L7.48063 11.6375C7.46358 11.7018 7.43389 11.762 7.3933 11.8146C7.35271 11.8672 7.30203 11.9113 7.24423 11.9441C7.18642 11.9769 7.12265 11.9979 7.05665 12.0058C6.99064 12.0136 6.92373 12.0083 6.85982 11.99C6.79591 11.9717 6.73628 11.9409 6.68444 11.8993C6.63259 11.8577 6.58956 11.8062 6.55786 11.7477C6.52616 11.6893 6.50643 11.6251 6.49982 11.559C6.49321 11.4928 6.49986 11.426 6.51937 11.3625L8.51937 4.3625C8.55781 4.23733 8.64382 4.13224 8.75891 4.0698C8.87399 4.00736 9.00898 3.99256 9.13487 4.02857C9.26075 4.06459 9.36749 4.14855 9.43214 4.26241C9.49679 4.37627 9.5142 4.51094 9.48063 4.6375ZM12.8 8.4L10.8 9.9C10.6939 9.97956 10.5606 10.0137 10.4293 9.99498C10.298 9.97622 10.1796 9.90609 10.1 9.8C10.0204 9.69391 9.98627 9.56056 10.005 9.42929C10.0238 9.29801 10.0939 9.17957 10.2 9.1L11.6669 8L10.2 6.9C10.1475 6.8606 10.1032 6.81125 10.0698 6.75475C10.0363 6.69825 10.0143 6.63571 10.005 6.57071C9.99574 6.50571 9.99935 6.43952 10.0156 6.37591C10.0319 6.3123 10.0606 6.25253 10.1 6.2C10.1394 6.14747 10.1888 6.10322 10.2453 6.06976C10.3018 6.03631 10.3643 6.01431 10.4293 6.00503C10.4943 5.99574 10.5605 5.99935 10.6241 6.01564C10.6877 6.03194 10.7475 6.0606 10.8 6.1L12.8 7.6C12.8621 7.64657 12.9125 7.70697 12.9472 7.77639C12.9819 7.84582 13 7.92238 13 8C13 8.07762 12.9819 8.15418 12.9472 8.22361C12.9125 8.29303 12.8621 8.35343 12.8 8.4Z"
                                        fill="white"/>
                                </svg>
                                {profileInfo?.UserRole__c}
                            </div>
                            <div
                                className={'text-[12px] inline-flex gap-2 rounded-3xl profile-label-bg px-3 py-1 items-center font-medium text-white'}>
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M10.4994 13.4169C10.4994 13.5274 10.4555 13.6333 10.3774 13.7115C10.2992 13.7896 10.1933 13.8335 10.0828 13.8335H5.91608C5.80558 13.8335 5.6996 13.7896 5.62146 13.7115C5.54332 13.6333 5.49942 13.5274 5.49942 13.4169C5.49942 13.3064 5.54332 13.2004 5.62146 13.1222C5.6996 13.0441 5.80558 13.0002 5.91608 13.0002H10.0828C10.1933 13.0002 10.2992 13.0441 10.3774 13.1222C10.4555 13.2004 10.4994 13.3064 10.4994 13.4169ZM12.5828 6.75019C12.5845 7.4448 12.4276 8.13063 12.124 8.75535C11.8203 9.38007 11.378 9.92717 10.8307 10.3549C10.7283 10.4333 10.6453 10.5341 10.5879 10.6496C10.5305 10.765 10.5002 10.8921 10.4994 11.021V11.3335C10.4994 11.5545 10.4116 11.7665 10.2553 11.9228C10.0991 12.0791 9.8871 12.1669 9.66608 12.1669H6.33275C6.11174 12.1669 5.89978 12.0791 5.74349 11.9228C5.58721 11.7665 5.49942 11.5545 5.49942 11.3335V11.021C5.49933 10.8936 5.47004 10.7679 5.41379 10.6536C5.35754 10.5393 5.27583 10.4394 5.17494 10.3617C4.629 9.93647 4.18694 9.39266 3.88222 8.7714C3.5775 8.15013 3.4181 7.46768 3.41608 6.77571C3.40254 4.29342 5.40879 2.22623 7.889 2.16686C8.50012 2.15213 9.10801 2.2598 9.67689 2.48353C10.2458 2.70727 10.7642 3.04254 11.2015 3.46961C11.6389 3.89669 11.9864 4.40694 12.2236 4.97034C12.4608 5.53374 12.5829 6.13889 12.5828 6.75019ZM10.9104 6.26373C10.8023 5.66024 10.512 5.10434 10.0784 4.67087C9.64483 4.2374 9.08887 3.94717 8.48535 3.83925C8.43139 3.83016 8.37616 3.83178 8.32282 3.84403C8.26948 3.85627 8.21908 3.87891 8.17449 3.91063C8.1299 3.94236 8.09199 3.98256 8.06294 4.02893C8.03388 4.07531 8.01424 4.12696 8.00515 4.18092C7.99605 4.23489 7.99767 4.29011 8.00992 4.34345C8.02217 4.39679 8.0448 4.44719 8.07652 4.49179C8.10825 4.53638 8.14845 4.57428 8.19483 4.60334C8.2412 4.6324 8.29285 4.65203 8.34681 4.66113C9.20983 4.80644 9.94213 5.53873 10.0885 6.40332C10.105 6.50036 10.1553 6.58843 10.2305 6.65192C10.3057 6.71542 10.401 6.75023 10.4994 6.75019C10.523 6.75005 10.5465 6.74814 10.5697 6.74446C10.6786 6.72587 10.7757 6.66478 10.8396 6.57463C10.9035 6.48448 10.9289 6.37265 10.9104 6.26373Z"
                                        fill="white"/>
                                </svg>
                                {totalActiveSkills} Active Skill
                            </div>
                        </div>
                    </div>
                </div>
            )}
        </>
    )
}
